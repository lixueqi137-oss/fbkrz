<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å´©æºƒ-æ¢å¤æ—¥å¿— | åˆ›ä¸šè€…çš„æƒ…ç»ªç®¡ç†ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3a0ca3;
            --accent-color: #f72585;
            --light-color: #f8f9fa;
            --dark-color: #212529;
            --success-color: #4cc9f0;
            --warning-color: #f8961e;
            --danger-color: #f94144;
            --gray-color: #adb5bd;
            --border-radius: 10px;
            --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background-color: #f5f7ff;
            color: var(--dark-color);
            line-height: 1.6;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
        }
        
        @media (min-width: 992px) {
            .container {
                grid-template-columns: 1fr 1fr;
            }
            
            .full-width {
                grid-column: 1 / -1;
            }
        }
        
        .card {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }
        
        h2 {
            color: var(--secondary-color);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        h2 i {
            color: var(--primary-color);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-color);
        }
        
        input, textarea, select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--gray-color);
            border-radius: 8px;
            font-size: 16px;
            transition: var(--transition);
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }
        
        .btn {
            display: inline-block;
            padding: 12px 25px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
        }
        
        .btn:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
        }
        
        .btn-danger {
            background-color: var(--danger-color);
        }
        
        .btn-danger:hover {
            background-color: #d32f2f;
        }
        
        .btn-success {
            background-color: var(--success-color);
        }
        
        .btn-success:hover {
            background-color: #2d9cdb;
        }
        
        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .severity-level {
            display: flex;
            gap: 10px;
            margin-top: 5px;
        }
        
        .severity-btn {
            flex: 1;
            padding: 10px;
            background-color: #e9ecef;
            border: 2px solid transparent;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .severity-btn:hover {
            background-color: #dee2e6;
        }
        
        .severity-btn.selected {
            border-color: var(--primary-color);
            background-color: rgba(67, 97, 238, 0.1);
            font-weight: 600;
        }
        
        .severity-1 { color: #4caf50; }
        .severity-2 { color: #8bc34a; }
        .severity-3 { color: #ffc107; }
        .severity-4 { color: #ff9800; }
        .severity-5 { color: #f44336; }
        
        .log-entry {
            border-bottom: 1px solid #eee;
            padding: 20px 0;
        }
        
        .log-entry:last-child {
            border-bottom: none;
        }
        
        .log-date {
            font-size: 0.9rem;
            color: var(--gray-color);
            margin-bottom: 5px;
        }
        
        .log-trigger {
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        
        .log-pattern {
            display: inline-block;
            background-color: #e9ecef;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
            margin-top: 10px;
            color: var(--dark-color);
        }
        
        .log-body-signal {
            display: inline-block;
            margin-right: 10px;
            margin-top: 10px;
            padding: 4px 10px;
            background-color: #fff5f5;
            border-radius: 20px;
            font-size: 0.85rem;
            color: var(--danger-color);
        }
        
        .log-breakthrough {
            margin-top: 10px;
            padding: 10px;
            background-color: #f0f9ff;
            border-radius: 8px;
            border-left: 4px solid var(--success-color);
        }
        
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .stat-card {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: var(--gray-color);
            margin-top: 5px;
        }
        
        .pattern-tag {
            display: inline-block;
            padding: 5px 12px;
            background-color: #eef2ff;
            border-radius: 20px;
            margin: 5px;
            font-size: 0.9rem;
            color: var(--primary-color);
        }
        
        .pattern-tag .count {
            background-color: var(--primary-color);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: inline-block;
            text-align: center;
            font-size: 0.8rem;
            margin-left: 5px;
        }
        
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--gray-color);
        }
        
        .empty-state i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #dee2e6;
        }
        
        .insight-box {
            background: linear-gradient(135deg, #f0f4ff, #eef2ff);
            border-left: 4px solid var(--primary-color);
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: var(--gray-color);
            font-size: 0.9rem;
            border-top: 1px solid #eee;
        }
        
        .hidden {
            display: none;
        }
        
        .export-import {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .mood-emoji {
            font-size: 1.5rem;
            margin-right: 5px;
        }
    </style>
</head>
<body>
    <header>
        <h1><i class="fas fa-brain"></i> å´©æºƒ-æ¢å¤æ—¥å¿—</h1>
        <p class="subtitle">åˆ›ä¸šè€…çš„æƒ…ç»ªç®¡ç†ç³»ç»Ÿ | æ”¶é›†ä½ çš„å´©æºƒæ•°æ®ï¼Œå»ºç«‹é˜²å´©æºƒåè®®ï¼Œå°†åå¤å˜æˆä½ çš„æˆé•¿åœ°å›¾</p>
    </header>
    
    <div class="container">
        <!-- è®°å½•æ–°æ—¥å¿— -->
        <div class="card">
            <h2><i class="fas fa-pen-alt"></i> è®°å½•æ–°æ—¥å¿—</h2>
            <form id="logForm">
                <div class="form-group">
                    <label for="trigger">1. è§¦å‘ç‚¹</label>
                    <input type="text" id="trigger" placeholder="æ˜¯ä»€ä¹ˆè§¦å‘äº†è¿™æ¬¡å´©æºƒ/å‹åŠ›ï¼Ÿä¾‹å¦‚ï¼šçœ‹åˆ°é•¿é•¿ä»»åŠ¡æ¸…å•ã€æŸä¸ªä»»åŠ¡å¡å£³ã€è´Ÿé¢åé¦ˆ..." required>
                </div>
                
                <div class="form-group">
                    <label for="reaction">2. æˆ‘çš„ååº”</label>
                    <textarea id="reaction" placeholder="æˆ‘åšå‡ºäº†ä»€ä¹ˆååº”ï¼Ÿä¾‹å¦‚ï¼šåˆ·æ‰‹æœºé€ƒé¿ã€ç–¯ç‹‚ç©ºæƒ³ã€è‡ªæˆ‘æ‰¹åˆ¤ã€æš´é¥®æš´é£Ÿ..." required></textarea>
                </div>
                
                <div class="form-group">
                    <label>3. èº«ä½“ä¿¡å·ï¼ˆå¯å¤šé€‰ï¼‰</label>
                    <div>
                        <label><input type="checkbox" class="body-signal" value="å¤´ç—›"> å¤´ç—›</label>
                        <label><input type="checkbox" class="body-signal" value="èƒƒç—›"> èƒƒç—›</label>
                        <label><input type="checkbox" class="body-signal" value="èƒ¸é—·"> èƒ¸é—·</label>
                        <label><input type="checkbox" class="body-signal" value="å¤´æ™•"> å¤´æ™•</label>
                        <label><input type="checkbox" class="body-signal" value="è‚Œè‚‰ç´§å¼ "> è‚Œè‚‰ç´§å¼ </label>
                        <label><input type="checkbox" class="body-signal" value="å¤±çœ "> å¤±çœ </label>
                        <label><input type="checkbox" class="body-signal" value="ç–²æƒ«"> ç–²æƒ«</label>
                        <input type="text" id="otherBodySignal" placeholder="å…¶ä»–..." style="margin-top: 10px; width: 100%;">
                    </div>
                </div>
                
                <div class="form-group">
                    <label>4. å´©æºƒä¸¥é‡ç¨‹åº¦</label>
                    <div class="severity-level">
                        <div class="severity-btn severity-1" data-level="1">1<br>è½»å¾®</div>
                        <div class="severity-btn severity-2" data-level="2">2<br>ä¸­åº¦</div>
                        <div class="severity-btn severity-3" data-level="3">3<br>ä¸¥é‡</div>
                        <div class="severity-btn severity-4" data-level="4">4<br>å¾ˆä¸¥é‡</div>
                        <div class="severity-btn severity-5" data-level="5">5<br>æåº¦ä¸¥é‡</div>
                    </div>
                    <input type="hidden" id="severity" value="3" required>
                </div>
                
                <div class="form-group">
                    <label for="breakthrough">5. ä¸€ä¸ªå¾®å°çªç ´</label>
                    <textarea id="breakthrough" placeholder="æˆ‘æ˜¯æ€ä¹ˆæš‚æ—¶èµ°å‡ºæ¥çš„ï¼Ÿï¼ˆå“ªæ€•åªæ˜¯å»å–äº†æ¯æ°´ã€ç»™æœ‹å‹å‘äº†æ¶ˆæ¯ã€æ·±å‘¼å¸äº†5æ¬¡ï¼‰" required></textarea>
                </div>
                
                <div class="form-group">
                    <label for="pattern">6. æ¨¡å¼å‘½å</label>
                    <input type="text" id="pattern" placeholder="ç»™è¿™æ¬¡å´©æºƒèµ·ä¸ªåï¼Œå¦‚ï¼šå…¨èƒ½è€…å¹»è§‰å‘ä½œã€æœªæ¥ææƒ§ç—‡3.0ã€å®Œç¾ä¸»ä¹‰é™·é˜±..." required>
                </div>
                
                <div class="btn-group">
                    <button type="submit" class="btn"><i class="fas fa-save"></i> ä¿å­˜æ—¥å¿—</button>
                    <button type="button" id="resetBtn" class="btn btn-danger"><i class="fas fa-redo"></i> é‡ç½®</button>
                </div>
            </form>
        </div>
        
        <!-- æŸ¥çœ‹æ—¥å¿— -->
        <div class="card">
            <h2><i class="fas fa-history"></i> å†å²æ—¥å¿—</h2>
            <div id="logList"></div>
            <div id="emptyLogs" class="empty-state">
                <i class="fas fa-clipboard-list"></i>
                <p>è¿˜æ²¡æœ‰æ—¥å¿—è®°å½•<br>å¼€å§‹è®°å½•ä½ çš„ç¬¬ä¸€æ¬¡å´©æºƒ-æ¢å¤ç»å†</p>
            </div>
        </div>
        
        <!-- ç»Ÿè®¡ä¸æ´å¯Ÿ -->
        <div class="card full-width">
            <h2><i class="fas fa-chart-line"></i> æ•°æ®æ´å¯Ÿ</h2>
            <div id="statsContainer" class="stats-container">
                <!-- ç»Ÿè®¡æ•°æ®ä¼šé€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
            </div>
            
            <div id="patternInsights" class="insight-box">
                <h3><i class="fas fa-lightbulb"></i> æ¨¡å¼è¯†åˆ«</h3>
                <p id="commonPatterns">è®°å½•æ›´å¤šæ—¥å¿—åï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºä½ çš„å¸¸è§å´©æºƒæ¨¡å¼</p>
                <div id="patternTags"></div>
            </div>
            
            <div class="export-import">
                <h3><i class="fas fa-file-export"></i> æ•°æ®ç®¡ç†</h3>
                <p>ä½ çš„æ‰€æœ‰æ•°æ®éƒ½ä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨ä¸­ã€‚ä½ å¯ä»¥å¯¼å‡ºå¤‡ä»½æˆ–å¯¼å…¥ä¹‹å‰çš„æ•°æ®ã€‚</p>
                <div class="btn-group">
                    <button id="exportBtn" class="btn btn-success"><i class="fas fa-download"></i> å¯¼å‡ºæ•°æ®</button>
                    <button id="importBtn" class="btn"><i class="fas fa-upload"></i> å¯¼å…¥æ•°æ®</button>
                    <button id="clearBtn" class="btn btn-danger"><i class="fas fa-trash-alt"></i> æ¸…é™¤æ‰€æœ‰æ•°æ®</button>
                </div>
                <input type="file" id="importFile" accept=".json" class="hidden">
            </div>
        </div>
        
        <!-- é˜²å´©æºƒåè®®ç”Ÿæˆå™¨ -->
        <div class="card full-width">
            <h2><i class="fas fa-shield-alt"></i> é˜²å´©æºƒåè®®ç”Ÿæˆå™¨</h2>
            <p>æ ¹æ®ä½ çš„æ—¥å¿—è®°å½•ï¼Œä¸ºä½ å¸¸è§çš„å´©æºƒåœºæ™¯ç”Ÿæˆ"å‚»ç“œå¼è¡ŒåŠ¨å‰§æœ¬"ã€‚</p>
            
            <div class="form-group">
                <label for="protocolScenario">é€‰æ‹©ä½ çš„å´©æºƒåœºæ™¯ï¼š</label>
                <select id="protocolScenario">
                    <option value="taskOverload">çœ‹åˆ°ä»»åŠ¡æ¸…å•å°±ç˜«ç—ªï¼ˆæœªæ¥ææƒ§ç—‡ï¼‰</option>
                    <option value="loneliness">ç‹¬è‡ªåšäº‹æ„Ÿåˆ°å­¤ç‹¬å’Œæ€€ç–‘ï¼ˆåˆ›ä¸šè€…å­¤ç‹¬ç—‡ï¼‰</option>
                    <option value="perfectionism">è§‰å¾—"æ‰€æœ‰äº‹éƒ½å¾—è‡ªå·±åš"ï¼ˆå…¨èƒ½è€…ç‰¢ç¬¼ï¼‰</option>
                    <option value="procrastination">ä¸¥é‡æ‹–å»¶ï¼Œæ˜çŸ¥é‡è¦ä½†æ— æ³•å¼€å§‹</option>
                    <option value="burnout">ç²¾ç–²åŠ›å°½ï¼Œå¯¹ä¸€åˆ‡å¤±å»å…´è¶£</option>
                </select>
            </div>
            
            <button id="generateProtocol" class="btn"><i class="fas fa-magic"></i> ç”Ÿæˆé˜²å´©æºƒåè®®</button>
            
            <div id="protocolOutput" class="insight-box" style="margin-top: 20px; display: none;">
                <h3>ä½ çš„é˜²å´©æºƒåè®®</h3>
                <div id="protocolContent"></div>
                <button id="saveProtocol" class="btn" style="margin-top: 15px;"><i class="fas fa-bookmark"></i> ä¿å­˜åˆ°æˆ‘çš„åè®®åº“</button>
            </div>
        </div>
    </div>
    
    <footer>
        <p>ã€Šå´©æºƒ-æ¢å¤æ—¥å¿—ã€‹â€”â€” ä½ çš„åˆ›ä¸šæƒ…ç»ªç®¡ç†ç³»ç»Ÿ | æ•°æ®ä»…ä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨ï¼Œä¿æŠ¤ä½ çš„éšç§</p>
        <p>è®°ä½ï¼šä½ ä¸æ˜¯åœ¨è®°å½•å¤±è´¥ï¼Œè€Œæ˜¯åœ¨æ”¶é›†"ç³»ç»Ÿè°ƒè¯•æ•°æ®"</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–åº”ç”¨
            initApp();
            
            // è®¾ç½®ä¸¥é‡ç¨‹åº¦é€‰æ‹©æŒ‰é’®
            setupSeverityButtons();
            
            // è®¾ç½®è¡¨å•æäº¤
            setupFormSubmit();
            
            // è®¾ç½®å…¶ä»–æŒ‰é’®äº‹ä»¶
            setupButtons();
            
            // åŠ è½½å¹¶æ˜¾ç¤ºæ—¥å¿—
            loadAndDisplayLogs();
            
            // ç”Ÿæˆç»Ÿè®¡æ•°æ®
            generateStats();
        });
        
        // åº”ç”¨åˆå§‹åŒ–
        function initApp() {
            // æ£€æŸ¥æ˜¯å¦å·²æœ‰æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰åˆ™åˆå§‹åŒ–
            if (!localStorage.getItem('crashLogs')) {
                localStorage.setItem('crashLogs', JSON.stringify([]));
                localStorage.setItem('protocols', JSON.stringify([]));
            }
        }
        
        // è®¾ç½®ä¸¥é‡ç¨‹åº¦é€‰æ‹©æŒ‰é’®
        function setupSeverityButtons() {
            const buttons = document.querySelectorAll('.severity-btn');
            const severityInput = document.getElementById('severity');
            
            buttons.forEach(btn => {
                btn.addEventListener('click', function() {
                    // ç§»é™¤æ‰€æœ‰æŒ‰é’®çš„é€‰ä¸­çŠ¶æ€
                    buttons.forEach(b => b.classList.remove('selected'));
                    
                    // ç»™å½“å‰æŒ‰é’®æ·»åŠ é€‰ä¸­çŠ¶æ€
                    this.classList.add('selected');
                    
                    // æ›´æ–°éšè—è¾“å…¥æ¡†çš„å€¼
                    severityInput.value = this.getAttribute('data-level');
                });
            });
            
            // é»˜è®¤é€‰ä¸­çº§åˆ«3
            document.querySelector('.severity-btn[data-level="3"]').classList.add('selected');
        }
        
        // è®¾ç½®è¡¨å•æäº¤
        function setupFormSubmit() {
            const form = document.getElementById('logForm');
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // æ”¶é›†è¡¨å•æ•°æ®
                const trigger = document.getElementById('trigger').value;
                const reaction = document.getElementById('reaction').value;
                const severity = document.getElementById('severity').value;
                const breakthrough = document.getElementById('breakthrough').value;
                const pattern = document.getElementById('pattern').value;
                
                // æ”¶é›†èº«ä½“ä¿¡å·
                const bodySignals = [];
                document.querySelectorAll('.body-signal:checked').forEach(cb => {
                    bodySignals.push(cb.value);
                });
                
                // æ·»åŠ å…¶ä»–èº«ä½“ä¿¡å·
                const otherSignal = document.getElementById('otherBodySignal').value;
                if (otherSignal.trim()) {
                    bodySignals.push(otherSignal.trim());
                }
                
                // åˆ›å»ºæ—¥å¿—å¯¹è±¡
                const logEntry = {
                    id: Date.now(),
                    date: new Date().toLocaleString('zh-CN'),
                    trigger: trigger,
                    reaction: reaction,
                    bodySignals: bodySignals,
                    severity: parseInt(severity),
                    breakthrough: breakthrough,
                    pattern: pattern
                };
                
                // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
                saveLogEntry(logEntry);
                
                // é‡ç½®è¡¨å•
                form.reset();
                document.getElementById('otherBodySignal').value = '';
                
                // é‡æ–°é€‰ä¸­é»˜è®¤ä¸¥é‡ç¨‹åº¦
                document.querySelectorAll('.severity-btn').forEach(b => b.classList.remove('selected'));
                document.querySelector('.severity-btn[data-level="3"]').classList.add('selected');
                document.getElementById('severity').value = '3';
                
                // é‡æ–°åŠ è½½å’Œæ˜¾ç¤ºæ—¥å¿—
                loadAndDisplayLogs();
                
                // é‡æ–°ç”Ÿæˆç»Ÿè®¡æ•°æ®
                generateStats();
                
                // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
                alert('æ—¥å¿—å·²ä¿å­˜ï¼ä½ æ­£åœ¨æ”¶é›†å®è´µçš„ç³»ç»Ÿè°ƒè¯•æ•°æ®ã€‚');
            });
        }
        
        // ä¿å­˜æ—¥å¿—æ¡ç›®
        function saveLogEntry(logEntry) {
            const logs = JSON.parse(localStorage.getItem('crashLogs'));
            logs.unshift(logEntry); // æ·»åŠ åˆ°å¼€å¤´
            localStorage.setItem('crashLogs', JSON.stringify(logs));
        }
        
        // åŠ è½½å¹¶æ˜¾ç¤ºæ—¥å¿—
        function loadAndDisplayLogs() {
            const logs = JSON.parse(localStorage.getItem('crashLogs'));
            const logList = document.getElementById('logList');
            const emptyLogs = document.getElementById('emptyLogs');
            
            // æ¸…ç©ºå½“å‰åˆ—è¡¨
            logList.innerHTML = '';
            
            if (logs.length === 0) {
                emptyLogs.classList.remove('hidden');
                return;
            }
            
            emptyLogs.classList.add('hidden');
            
            // æ˜¾ç¤ºæ—¥å¿—æ¡ç›®
            logs.forEach(log => {
                const logElement = document.createElement('div');
                logElement.className = 'log-entry';
                
                // æ ¹æ®ä¸¥é‡ç¨‹åº¦é€‰æ‹©è¡¨æƒ…ç¬¦å·
                const severityEmoji = getSeverityEmoji(log.severity);
                
                logElement.innerHTML = `
                    <div class="log-date">${log.date} <span class="mood-emoji">${severityEmoji}</span> ä¸¥é‡ç¨‹åº¦: ${log.severity}/5</div>
                    <div class="log-trigger">è§¦å‘ç‚¹: ${log.trigger}</div>
                    <div><strong>ååº”:</strong> ${log.reaction}</div>
                    ${log.bodySignals.length > 0 ? `<div><strong>èº«ä½“ä¿¡å·:</strong> ${log.bodySignals.map(signal => `<span class="log-body-signal">${signal}</span>`).join('')}</div>` : ''}
                    <div class="log-breakthrough"><strong>å¾®å°çªç ´:</strong> ${log.breakthrough}</div>
                    <div class="log-pattern">æ¨¡å¼: ${log.pattern}</div>
                    <button class="btn" onclick="deleteLog(${log.id})" style="margin-top: 10px; padding: 5px 10px; font-size: 0.9rem;"><i class="fas fa-trash"></i> åˆ é™¤</button>
                `;
                
                logList.appendChild(logElement);
            });
        }
        
        // æ ¹æ®ä¸¥é‡ç¨‹åº¦è·å–è¡¨æƒ…ç¬¦å·
        function getSeverityEmoji(severity) {
            switch(parseInt(severity)) {
                case 1: return 'ğŸ˜Š';
                case 2: return 'ğŸ˜';
                case 3: return 'ğŸ˜Ÿ';
                case 4: return 'ğŸ˜¨';
                case 5: return 'ğŸ˜µ';
                default: return 'ğŸ˜';
            }
        }
        
        // åˆ é™¤æ—¥å¿—
        function deleteLog(id) {
            if (!confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡æ—¥å¿—å—ï¼Ÿ')) return;
            
            const logs = JSON.parse(localStorage.getItem('crashLogs'));
            const filteredLogs = logs.filter(log => log.id !== id);
            localStorage.setItem('crashLogs', JSON.stringify(filteredLogs));
            
            loadAndDisplayLogs();
            generateStats();
        }
        
        // ç”Ÿæˆç»Ÿè®¡æ•°æ®
        function generateStats() {
            const logs = JSON.parse(localStorage.getItem('crashLogs'));
            const statsContainer = document.getElementById('statsContainer');
            const commonPatterns = document.getElementById('commonPatterns');
            const patternTags = document.getElementById('patternTags');
            
            if (logs.length === 0) {
                statsContainer.innerHTML = `
                    <div class="stat-card">
                        <div class="stat-value">0</div>
                        <div class="stat-label">æ€»è®°å½•æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">0</div>
                        <div class="stat-label">å¹³å‡ä¸¥é‡ç¨‹åº¦</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">0</div>
                        <div class="stat-label">è¯†åˆ«æ¨¡å¼</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">0å¤©</div>
                        <div class="stat-label">æ¢å¤æ—¶é—´ç¼©çŸ­ä¸­</div>
                    </div>
                `;
                
                commonPatterns.textContent = 'è®°å½•æ›´å¤šæ—¥å¿—åï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºä½ çš„å¸¸è§å´©æºƒæ¨¡å¼';
                patternTags.innerHTML = '';
                return;
            }
            
            // è®¡ç®—ç»Ÿè®¡æ•°æ®
            const totalLogs = logs.length;
            
            // å¹³å‡ä¸¥é‡ç¨‹åº¦
            const avgSeverity = (logs.reduce((sum, log) => sum + log.severity, 0) / totalLogs).toFixed(1);
            
            // è¯†åˆ«æ¨¡å¼æ•°é‡
            const patterns = [...new Set(logs.map(log => log.pattern))];
            const patternCount = patterns.length;
            
            // æœ€å¸¸è§çš„èº«ä½“ä¿¡å·
            const bodySignalCount = {};
            logs.forEach(log => {
                log.bodySignals.forEach(signal => {
                    bodySignalCount[signal] = (bodySignalCount[signal] || 0) + 1;
                });
            });
            
            // æœ€å¸¸è§çš„è§¦å‘ç‚¹
            const triggerCount = {};
            logs.forEach(log => {
                const trigger = log.trigger.toLowerCase();
                triggerCount[trigger] = (triggerCount[trigger] || 0) + 1;
            });
            
            // æœ€å¸¸è§çš„æ¨¡å¼
            const patternFrequency = {};
            logs.forEach(log => {
                patternFrequency[log.pattern] = (patternFrequency[log.pattern] || 0) + 1;
            });
            
            // æ˜¾ç¤ºç»Ÿè®¡æ•°æ®
            statsContainer.innerHTML = `
                <div class="stat-card">
                    <div class="stat-value">${totalLogs}</div>
                    <div class="stat-label">æ€»è®°å½•æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${avgSeverity}/5</div>
                    <div class="stat-label">å¹³å‡ä¸¥é‡ç¨‹åº¦</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${patternCount}</div>
                    <div class="stat-label">è¯†åˆ«æ¨¡å¼</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${logs.length >= 2 ? 'âœ“' : '...'}</div>
                    <div class="stat-label">ç³»ç»Ÿè°ƒè¯•ä¸­</div>
                </div>
            `;
            
            // æ˜¾ç¤ºæ¨¡å¼è¯†åˆ«
            if (patterns.length > 0) {
                const topPatterns = Object.entries(patternFrequency)
                    .sort((a, b) => b[1] - a[1])
                    .slice(0, 5);
                
                if (topPatterns.length > 0) {
                    commonPatterns.textContent = `ä½ çš„æœ€å¸¸è§å´©æºƒæ¨¡å¼æ˜¯ï¼š"${topPatterns[0][0]}"ï¼ˆå‡ºç°äº†${topPatterns[0][1]}æ¬¡ï¼‰`;
                    
                    // æ˜¾ç¤ºæ¨¡å¼æ ‡ç­¾
                    patternTags.innerHTML = '';
                    topPatterns.forEach(([pattern, count]) => {
                        const tag = document.createElement('span');
                        tag.className = 'pattern-tag';
                        tag.innerHTML = `${pattern} <span class="count">${count}</span>`;
                        patternTags.appendChild(tag);
                    });
                }
            }
        }
        
        // è®¾ç½®æŒ‰é’®äº‹ä»¶
        function setupButtons() {
            // é‡ç½®æŒ‰é’®
            document.getElementById('resetBtn').addEventListener('click', function() {
                document.getElementById('logForm').reset();
                document.getElementById('otherBodySignal').value = '';
                document.querySelectorAll('.severity-btn').forEach(b => b.classList.remove('selected'));
                document.querySelector('.severity-btn[data-level="3"]').classList.add('selected');
                document.getElementById('severity').value = '3';
            });
            
            // å¯¼å‡ºæ•°æ®æŒ‰é’®
            document.getElementById('exportBtn').addEventListener('click', function() {
                const logs = JSON.parse(localStorage.getItem('crashLogs'));
                const protocols = JSON.parse(localStorage.getItem('protocols'));
                const data = {
                    crashLogs: logs,
                    protocols: protocols,
                    exportDate: new Date().toISOString()
                };
                
                const dataStr = JSON.stringify(data, null, 2);
                const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
                
                const exportFileDefaultName = `å´©æºƒæ¢å¤æ—¥å¿—_å¤‡ä»½_${new Date().toISOString().slice(0,10)}.json`;
                
                const linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', exportFileDefaultName);
                linkElement.click();
            });
            
            // å¯¼å…¥æ•°æ®æŒ‰é’®
            document.getElementById('importBtn').addEventListener('click', function() {
                document.getElementById('importFile').click();
            });
            
            document.getElementById('importFile').addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const data = JSON.parse(e.target.result);
                        
                        if (confirm('å¯¼å…¥æ•°æ®å°†è¦†ç›–å½“å‰æ‰€æœ‰æ—¥å¿—ï¼Œç¡®å®šè¦ç»§ç»­å—ï¼Ÿ')) {
                            if (data.crashLogs) {
                                localStorage.setItem('crashLogs', JSON.stringify(data.crashLogs));
                            }
                            if (data.protocols) {
                                localStorage.setItem('protocols', JSON.stringify(data.protocols));
                            }
                            
                            loadAndDisplayLogs();
                            generateStats();
                            alert('æ•°æ®å¯¼å…¥æˆåŠŸï¼');
                        }
                    } catch (error) {
                        alert('å¯¼å…¥å¤±è´¥ï¼šæ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®');
                    }
                    
                    // é‡ç½®æ–‡ä»¶è¾“å…¥
                    document.getElementById('importFile').value = '';
                };
                reader.readAsText(file);
            });
            
            // æ¸…é™¤æ‰€æœ‰æ•°æ®æŒ‰é’®
            document.getElementById('clearBtn').addEventListener('click', function() {
                if (confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰æ•°æ®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ï¼')) {
                    localStorage.setItem('crashLogs', JSON.stringify([]));
                    localStorage.setItem('protocols', JSON.stringify([]));
                    loadAndDisplayLogs();
                    generateStats();
                    alert('æ‰€æœ‰æ•°æ®å·²æ¸…é™¤');
                }
            });
            
            // ç”Ÿæˆé˜²å´©æºƒåè®®æŒ‰é’®
            document.getElementById('generateProtocol').addEventListener('click', function() {
                const scenario = document.getElementById('protocolScenario').value;
                const protocolOutput = document.getElementById('protocolOutput');
                const protocolContent = document.getElementById('protocolContent');
                
                let protocol = '';
                
                switch(scenario) {
                    case 'taskOverload':
                        protocol = `
                            <h4>åœºæ™¯ï¼šçœ‹åˆ°ä»»åŠ¡æ¸…å•å°±ç˜«ç—ªï¼ˆæœªæ¥ææƒ§ç—‡ï¼‰</h4>
                            <p><strong>å‚»ç“œå¼è¡ŒåŠ¨å‰§æœ¬ï¼š</strong></p>
                            <ol>
                                <li><strong>ç«‹åˆ»åˆä¸Šç”µè„‘/æ‰‹æœº</strong>ï¼Œåˆ‡æ–­ä¿¡æ¯è¾“å…¥</li>
                                <li>æ‹¿å‡ºä¾¿ç­¾çº¸æˆ–ä¸€å¼ ç™½çº¸ï¼Œ<strong>åªå†™ä¸‹ä¸€ä»¶æœªæ¥24å°æ—¶å†…è¦åšçš„äº‹</strong>ï¼ˆä¸æ˜¯"å‰ªè¾‘è§†é¢‘"ï¼Œè€Œæ˜¯"æŠŠæ˜¨å¤©æ‹çš„3æ®µç´ æå¯¼å…¥å‰ªè¾‘è½¯ä»¶ï¼Œé‡å‘½å"ï¼‰</li>
                                <li>æŠŠä¾¿ç­¾è´´åœ¨ç”µè„‘è¾¹ä¸Šï¼Œå…¶ä»–æ‰€æœ‰ä»»åŠ¡æ¸…å•é”è¿›æŠ½å±‰æˆ–å…³é—­ç›¸å…³åº”ç”¨</li>
                                <li>å‘Šè¯‰è‡ªå·±ï¼š<strong>"æˆ‘åªéœ€è¦å®Œæˆä¾¿ç­¾ä¸Šçš„è¿™ä¸€ä»¶äº‹"</strong></li>
                                <li>åšå®Œä¾¿ç­¾ä¸Šçš„äº‹ï¼Œå¥–åŠ±è‡ªå·±ä¼‘æ¯10åˆ†é’Ÿï¼Œç„¶åæ‰èƒ½è€ƒè™‘æ‰“å¼€æŠ½å±‰</li>
                            </ol>
                            <p><strong>åŸç†ï¼š</strong>æœªæ¥ææƒ§ç—‡çš„æ ¸å¿ƒæ˜¯"æ‰€æœ‰æœªæ¥ä»»åŠ¡åŒæ—¶å‹åœ¨å½“ä¸‹"ã€‚è¿™ä¸ªåè®®é€šè¿‡ç‰©ç†éš”ç¦»ï¼ˆä¾¿ç­¾/æŠ½å±‰ï¼‰å’Œæåº¦ç®€åŒ–ï¼ˆåªåšä¸€ä»¶äº‹ï¼‰æ¥é‡å»ºæ§åˆ¶æ„Ÿã€‚</p>
                        `;
                        break;
                        
                    case 'loneliness':
                        protocol = `
                            <h4>åœºæ™¯ï¼šç‹¬è‡ªåšäº‹æ„Ÿåˆ°å­¤ç‹¬å’Œæ€€ç–‘ï¼ˆåˆ›ä¸šè€…å­¤ç‹¬ç—‡ï¼‰</h4>
                            <p><strong>å‚»ç“œå¼è¡ŒåŠ¨å‰§æœ¬ï¼š</strong></p>
                            <ol>
                                <li>ç«‹åˆ»æ‰“å¼€å¾®ä¿¡/é€šè®¯å½•ï¼Œ<strong>ç»™ä½ è®¤ä¸ºæœ€å¯èƒ½ç†è§£ä½ çš„2ä¸ªäººå‘åŒä¸€å¥è¯</strong>ï¼š"æˆ‘æ­£åœ¨è¿›è¡ŒXXé¡¹ç›®ï¼Œç°åœ¨å¡åœ¨YYç¯èŠ‚ï¼Œå¦‚æœä½ æœ‰ç©ºï¼Œæƒ³å¬å¬ä½ ç›´è§‰ä¸Šçš„å»ºè®®ï¼Œä¸éœ€è¦æ·±å…¥ã€‚"</li>
                                <li><strong>ä¸åšæ·±åº¦è®¨è®ºï¼Œåªè¦å¤–éƒ¨è§†è§’çš„åˆºæ¿€</strong></li>
                                <li>å¦‚æœæ²¡äººå›å¤ï¼Œå»ç›¸å…³çš„åœ¨çº¿ç¤¾åŒºï¼ˆçŸ¥ä¹ã€è¡Œä¸šè®ºå›ç­‰ï¼‰å‘ä¸€ä¸ªç®€çŸ­çš„å¸–å­ï¼Œæè¿°ä½ çš„å¡ç‚¹</li>
                                <li>è®¾ç½®25åˆ†é’Ÿè®¡æ—¶å™¨ï¼Œåœ¨è¿™æœŸé—´<strong>åªæ”¶é›†å¤–éƒ¨åé¦ˆï¼Œä¸è¦æ±‚è§£å†³æ–¹æ¡ˆ</strong></li>
                                <li>25åˆ†é’Ÿåï¼Œæ— è®ºæ”¶åˆ°å¤šå°‘å›å¤ï¼Œæ•´ç†ä½ å¾—åˆ°çš„åé¦ˆï¼Œå†™ä¸‹3ä¸ªå…³é”®è¯</li>
                            </ol>
                            <p><strong>åŸç†ï¼š</strong>åˆ›ä¸šè€…å­¤ç‹¬ç—‡çš„æ ¸å¿ƒæ˜¯"è„‘æµ·ä¸­çš„å›éŸ³å£æ•ˆåº”"ã€‚è¿™ä¸ªåè®®é€šè¿‡å¼ºåˆ¶å¼•å…¥å¤–éƒ¨è§†è§’æ¥æ‰“ç ´æ€ç»´é—­ç¯ï¼Œå³ä½¿æ²¡æœ‰å®è´¨æ€§å»ºè®®ï¼Œäº¤æµè¡Œä¸ºæœ¬èº«å°±èƒ½ç¼“è§£å­¤ç‹¬æ„Ÿã€‚</p>
                        `;
                        break;
                        
                    case 'perfectionism':
                        protocol = `
                            <h4>åœºæ™¯ï¼šè§‰å¾—"æ‰€æœ‰äº‹éƒ½å¾—è‡ªå·±åš"ï¼ˆå…¨èƒ½è€…ç‰¢ç¬¼ï¼‰</h4>
                            <p><strong>å‚»ç“œå¼è¡ŒåŠ¨å‰§æœ¬ï¼š</strong></p>
                            <ol>
                                <li>ç«‹åˆ»ä¸Šæ·˜å®/é—²é±¼/freelanceå¹³å°ï¼Œæœç´¢ä½ å¯èƒ½å¤–åŒ…çš„ä»»åŠ¡å…³é”®è¯ï¼ˆå¦‚"çŸ­è§†é¢‘å‰ªè¾‘"ã€"PPTç¾åŒ–"ã€"å…¬ä¼—å·æ’ç‰ˆ"ï¼‰</li>
                                <li><strong>ä¸çœ‹ä»·æ ¼ï¼Œåªçœ‹ä½œå“å’Œè¯„ä»·</strong>ï¼Œæµè§ˆè‡³å°‘5ä¸ªæœåŠ¡å•†</li>
                                <li>é€‰æ‹©å…¶ä¸­ä¸€ä¸ªï¼Œå°†å…¶åŠ å…¥æ”¶è—å¤¹æˆ–è´­ç‰©è½¦ï¼ˆä¸ä¸€å®šè¦è´­ä¹°ï¼‰</li>
                                <li>å¯¹è‡ªå·±è¯´ï¼š<strong>"çœ‹ï¼Œè¿™ä¸ªä¸–ç•Œå……æ»¡äº†å¯ä»¥å¸®æˆ‘çš„äººï¼Œæˆ‘åªæ˜¯è¿˜æ²¡å­¦ä¼šä¸‹è®¢å•ã€‚"</strong></li>
                                <li>è®¡ç®—ä½ å½“å‰æ—¶è–ª vs å¤–åŒ…æˆæœ¬ï¼Œå¦‚æœå¤–åŒ…æ›´åˆ’ç®—ï¼Œå…è®¸è‡ªå·±è‡³å°‘å¤–åŒ…ä¸€ä»¶å°äº‹</li>
                            </ol>
                            <p><strong>åŸç†ï¼š</strong>å…¨èƒ½è€…ç‰¢ç¬¼çš„æ ¸å¿ƒæ˜¯"è‡ªæˆ‘é‡è¦æ€§å¹»è§‰"ã€‚è¿™ä¸ªåè®®ç”¨çœŸå®çš„å¸‚åœºé€‰é¡¹è½°å‡»å¹»è§‰ï¼Œé€šè¿‡å…·ä½“æ¯”ä»·è¡Œä¸ºè®©"å¤–åŒ…"ä»æŠ½è±¡æ¦‚å¿µå˜æˆå¯æ‰§è¡Œé€‰é¡¹ã€‚</p>
                        `;
                        break;
                        
                    case 'procrastination':
                        protocol = `
                            <h4>åœºæ™¯ï¼šä¸¥é‡æ‹–å»¶ï¼Œæ˜çŸ¥é‡è¦ä½†æ— æ³•å¼€å§‹</h4>
                            <p><strong>å‚»ç“œå¼è¡ŒåŠ¨å‰§æœ¬ï¼š</strong></p>
                            <ol>
                                <li>è®¾ç½®5åˆ†é’Ÿå€’è®¡æ—¶ï¼Œå‘Šè¯‰è‡ªå·±<strong>"æˆ‘åªåš5åˆ†é’Ÿï¼Œ5åˆ†é’Ÿåå¯ä»¥æ”¾å¼ƒ"</strong></li>
                                <li>åœ¨è¿™5åˆ†é’Ÿå†…ï¼Œåšä»»åŠ¡ä¸­æœ€å¾®ä¸è¶³é“çš„ä¸€éƒ¨åˆ†ï¼ˆå¦‚æ‰“å¼€æ–‡æ¡£ã€åˆ›å»ºæ–‡ä»¶å¤¹ï¼‰</li>
                                <li>5åˆ†é’Ÿåï¼Œå¦‚æœè¿˜æƒ³æ”¾å¼ƒï¼Œå°±çœŸæ­£æ”¾å¼ƒï¼Œä½†å¿…é¡»ä¼‘æ¯10åˆ†é’Ÿ</li>
                                <li>10åˆ†é’Ÿåï¼Œå†è®¾ç½®5åˆ†é’Ÿå€’è®¡æ—¶ï¼Œé‡å¤ä¸Šè¿°è¿‡ç¨‹</li>
                                <li>è®°å½•ä½ æ¯æ¬¡5åˆ†é’Ÿå†…å®é™…å®Œæˆçš„å†…å®¹ï¼Œæ— è®ºå¤šå¾®å°</li>
                            </ol>
                            <p><strong>åŸç†ï¼š</strong>ä¸¥é‡æ‹–å»¶çš„æ ¸å¿ƒæ˜¯"ä»»åŠ¡åœ¨æƒ³è±¡ä¸­çš„å·¨å¤§ç—›è‹¦"ã€‚è¿™ä¸ªåè®®é€šè¿‡æçŸ­æ—¶é—´æ‰¿è¯ºé™ä½å¯åŠ¨é˜»åŠ›ï¼Œåˆ©ç”¨"5åˆ†é’Ÿè§„åˆ™"ç»•è¿‡å¿ƒç†æŠµæŠ—ï¼Œè®©è¡ŒåŠ¨æœ¬èº«æ‰“ç ´æ‹–å»¶å¾ªç¯ã€‚</p>
                        `;
                        break;
                        
                    case 'burnout':
                        protocol = `
                            <h4>åœºæ™¯ï¼šç²¾ç–²åŠ›å°½ï¼Œå¯¹ä¸€åˆ‡å¤±å»å…´è¶£</h4>
                            <p><strong>å‚»ç“œå¼è¡ŒåŠ¨å‰§æœ¬ï¼š</strong></p>
                            <ol>
                                <li><strong>ç«‹å³åœæ­¢æ‰€æœ‰"åº”è¯¥åš"çš„äº‹æƒ…</strong>ï¼Œç»™è‡ªå·±å®Œå…¨è®¸å¯ä¼‘æ¯</li>
                                <li>è¿›è¡Œä¸€é¡¹å®Œå…¨ä¸éœ€è¦æ€è€ƒçš„ä½“åŠ›æ´»åŠ¨ï¼ˆå¦‚æ•£æ­¥ã€æ•´ç†ä¹¦æ¶ã€æ´—ç¢—ï¼‰</li>
                                <li>è®¾å®š"æ— ç½ªæ¶æ„Ÿä¼‘æ¯æ—¶é—´"ï¼šæ¥ä¸‹æ¥çš„2å°æ—¶å†…ï¼Œä¸å…è®¸ä»»ä½•ä¸å·¥ä½œç›¸å…³çš„æ€è€ƒ</li>
                                <li>å¦‚æœæ— æ³•åœæ­¢æ€è€ƒï¼Œå‡†å¤‡ä¸€å¼ çº¸ï¼ŒæŠŠè„‘ä¸­æ‰€æœ‰æƒ³æ³•å†™ä¸‹æ¥ï¼Œç„¶åç‰©ç†ä¸Šæ”¾åˆ°å¦ä¸€ä¸ªæˆ¿é—´</li>
                                <li>è¿›è¡Œä¸€é¡¹ç«¥å¹´æ—¶æœŸå–œæ¬¢çš„ç®€å•æ´»åŠ¨ï¼ˆå¦‚æ¶‚é¸¦ã€æ‹¼å›¾ã€å¬è€æ­Œï¼‰</li>
                            </ol>
                            <p><strong>åŸç†ï¼š</strong> burnoutçš„æ ¸å¿ƒæ˜¯"æ„ä¹‰æ„Ÿé€æ”¯"ã€‚è¿™ä¸ªåè®®é€šè¿‡å¼ºåˆ¶æ— ç”Ÿäº§åŠ›æ´»åŠ¨å’Œå›å½’ç«¥å¹´ç®€å•å¿«ä¹ï¼Œè®©å¤§è„‘ä»"æ„ä¹‰è¿½å¯»"æ¨¡å¼åˆ‡æ¢åˆ°"å­˜åœ¨"æ¨¡å¼ï¼Œä¸ºæ„ä¹‰æ„Ÿç”µæ± å……ç”µã€‚</p>
                        `;
                        break;
                }
                
                protocolContent.innerHTML = protocol;
                protocolOutput.style.display = 'block';
            });
            
            // ä¿å­˜åè®®æŒ‰é’®
            document.getElementById('saveProtocol').addEventListener('click', function() {
                const scenarioElement = document.getElementById('protocolScenario');
                const scenarioText = scenarioElement.options[scenarioElement.selectedIndex].text;
                const protocolContent = document.getElementById('protocolContent').innerHTML;
                
                const protocols = JSON.parse(localStorage.getItem('protocols'));
                const newProtocol = {
                    id: Date.now(),
                    scenario: scenarioText,
                    content: protocolContent,
                    date: new Date().toLocaleString('zh-CN')
                };
                
                protocols.push(newProtocol);
                localStorage.setItem('protocols', JSON.stringify(protocols));
                
                alert('åè®®å·²ä¿å­˜åˆ°ä½ çš„åè®®åº“ï¼ä½ å¯ä»¥åœ¨éœ€è¦æ—¶æŸ¥çœ‹è¿™äº›åè®®ã€‚');
            });
        }
    </script>
</body>
</html>